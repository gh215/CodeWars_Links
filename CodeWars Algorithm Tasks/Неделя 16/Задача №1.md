## Последовательность решения задачи

**Ссылка:** [Codewars Kata Review]](https://www.codewars.com/kata/reviews/67fa331d81631b0013975d03/groups/67fd25d9609b045f17006994) 
---


### 1. Полностью понять, что требуется сделать в задаче

**Ответ:** Нужно реализовать функцию 'threeWishes', которая моделирует выполнение джинном трех желаний путешественника.

*   **Пример:**
    *   'parcel': '["gold coin", "gold coin", "silver coin", "water", "water"]'
    *   'wish1': '"I want 1 gold coin"'
    *   'wish2': '"I want 2 waters"'
    *   'wish3': '"I want 1 apple"'
    *   **Шаг 1 (wish1):** "gold coin" найден, последний индекс 1. Вставляем 1 "gold coin" после индекса 1. 'parcel' -> '["gold coin", "gold coin", "gold coin", "silver coin", "water", "water"]'
    *   **Шаг 2 (wish2):** "water" найден (после удаления 's' из "waters"), последний индекс 5. Вставляем 2 "water" после индекса 5. 'parcel' -> '["gold coin", "gold coin", "gold coin", "silver coin", "water", "water", "water", "water"]'
    *   **Шаг 3 (wish3):** "apple" не найден. Добавляем 1 "apple" в конец. 'parcel' -> '["gold coin", "gold coin", "gold coin", "silver coin", "water", "water", "water", "water", "apple"]'
    *   **Результат:** '["gold coin", "gold coin", "gold coin", "silver coin", "water", "water", "water", "water", "apple"]'

---

### 2. Разбить задачу на подзадачи

**Ответ:**

1.  **Проверка на наказание:** В самом начале проверить все три строки желаний на наличие подстроки "wishes". Если найдено, немедленно вернуть '[]'.
2.  **Цикл по желаниям:** Организовать обработку для каждого из трех желаний.
3.  **Разделитель желания:** Для текущего желания:
    *   Реализовать функцию для извлечения первой цифры.
    *   Реализовать функцию для извлечения названия предмета.
4.  **Нормализация имени предмета:** Убрать 's' с конца названия предмета, если оно там есть.
5.  **Поиск последней позиции:** Найти индекс последнего вхождения нормализованного имени предмета в списке 'parcel'.
6.  **Модификация списка:**
    *   Если предмет найден: вычислить позицию для вставки и вставить нужное количество копий предмета.
    *   Если предмет не найден: добавить нужное количество копий предмета в конец списка.
7.  Вернуть измененный список 'parcel'.

---

### 3. Написать псевдокод (функции, осн. переменные, прим. последовательность действий)

**Ответ:**

'''plaintext

def find_first_digit(text):
  for char in text:
    if char isdigit():
      return char
  return None 

def what_to_add(curr_wish):
  digit = find_first_digit(curr_wish)
  НАЙТИ позицию pos цифры digit В curr_wish
  wish_add = ВЗЯТЬ ПОДСТРОКУ curr_wish НАЧИНАЯ С pos + 1
  УДАЛИТЬ пробелы В НАЧАЛЕ/КОНЦЕ wish_add
  ВЕРНУТЬ wish_add

def three_wishes(parcel, wish1, wish2, wish3):

  if "wishes" in wish1 ИЛИ "wishes" in wish2 ИЛИ "wishes" in wish3:
    return []

  wishes = [wish1, wish2, wish3]

  for wish in wishes:
    digit_char = find_first_digit(wish)
    how_much = ПРЕОБРАЗОВАТЬ digit_char В ЦЕЛОЕ ЧИСЛО

    item_to_add_raw = what_to_add(wish) 

    item_to_add_base = item_to_add_raw
    if item_to_add_base ЗАКАНЧИВАЕТСЯ НА 's':
      item_to_add_base = УДАЛИТЬ ПОСЛЕДНИЙ СИМВОЛ ('s') ИЗ item_to_add_base

    last_index = -1
    for i range(len(parcel - 1)) ДО 0 С ШАГОМ -1:
      if parcel[i] == item_to_add_base:
        last_index = i
        break

    items_to_insert = СОЗДАТЬ СПИСОК ИЗ how_much КОПИЙ item_to_add_base

    if last_index != -1:
      insert_position = last_index + 1
      ВСТАВИТЬ СПИСОК items_to_insert В parcel НА ПОЗИЦИЮ insert_position
    else: 
      ДОБАВИТЬ ЭЛЕМЕНТЫ ИЗ СПИСКА items_to_insert В КОНЕЦ parcel

  return parcel
'''

---

### 4. Реализовать функции

*   4.1. **Что должна делать функция?**
*   4.2. **Какие данные требуются?**
*   4.3. **Какие варианты входных данных могут быть?**
*   4.4. **Реализация тела функции.**
*   4.5. **Проверка и тестирование функции.**

**Ответ:**

**А) Функция 'find_first_digit':**
*   4.1. Находит и возвращает первый символ-цифру в переданной строке.
*   4.2. Вход: Строка 'text'.
*   4.3. Варианты входных данных: Строки с цифрами, строки без цифр.
*   4.4. Реализация тела функции: 

'''python
def find_first_digit(text):
    for char in text:
        if char.isdigit():
            return char
    return None
'''

*   4.5. Проверка и тестирование функции:
    *   'find_first_digit("I want 1 food")' -> '"1"'
    *   'find_first_digit("give me 5 apples")' -> '"5"'
    *   'find_first_digit("no digits here")' -> 'None'

**Б) Функция 'what_to_add':**
*   4.1. Извлекает из строки желания название предмета, которое идет после первой цифры. Удаляет лишние пробелы по краям.
*   4.2. Вход: Строка 'curr_wish'.
*   4.3. Варианты входных данных: Строки формата "I want [n] [item(s)]".
*   4.4. Реализация тела функции: 

'''python
def what_to_add(curr_wish):
    pos = curr_wish.find(find_first_digit(curr_wish))
    wish_add = curr_wish[pos + 1:]
    return wish_add.strip() 
'''

*   4.5. Проверка и тестирование функции:
    *   'what_to_add("I want 1 food")' -> '"food"'
    *   'what_to_add("I want 2 books ")' -> '"books"'
    *   'what_to_add("I want  3   silver coins")' -> '"silver coins"'

**В) Функция 'three_wishes':**
*   4.1. Реализует основную логику задачи: проверяет на "жадность", обрабатывает три желания, модифицируя список 'parcel' согласно правилам.
*   4.2. Вход: Список 'parcel', строки 'wish1', 'wish2', 'wish3'.
*   4.3. Варианты входных данных: Различные 'parcel' (включая пустой), различные желания (включая содержащие "wishes", предметы не из списка, предметы во множественном/единственном числе).
*   4.4. Реализация тела функции: (см. п. 5)
*   4.5. Проверка и тестирование функции: (см. п. 6)

---

### 5. Написание кода основной функции

**Ответ:**

'''python
def three_wishes(parcel, wish1, wish2, wish3):
    if 'wishes' in wish1 or 'wishes' in wish2 or 'wishes' in wish3:
        return []
    
    wishes = [wish1, wish2, wish3]
    
    for wish in wishes:
        how_much = int(find_first_digit(wish))
        item_to_add = what_to_add(wish)

        if item_to_add.endswith('s'):
            item_to_add = item_to_add[:-1]
            
        last_index = -1
        for i in range(len(parcel) - 1, -1, -1): 
            if parcel[i] == item_to_add:
                last_index = i
                break

        its_to_add = [item_to_add] * how_much
        
        if last_index != -1:
            insert_position = last_index + 1
            parcel[insert_position:insert_position] = its_to_add 
        else:
            parcel.extend(its_to_add)
        
    return parcel

'''

---

### 6. Тестирование всей функции ('three_wishes')

**Ответ:**

1.  **Основной пример:**
    *   Вход:
        *   'parcel = ["gold coin","gold coin","gold coin","silver coin","silver coin", "water","water","water","water", "food", "food", "food", "food", "book","book", "weapon","weapon", "clothe","clothe", "medicine", "medicine", "tool", "tool"]'
        *   'wish1="I want 1 food"'
        *   'wish2="I want 2 books"'
        *   'wish3="I want 1 girl"'
    *   Вызов: 'three_wishes(parcel, wish1, wish2, wish3)'
    *   Ожидаемый результат: '["gold coin", "gold coin", "gold coin", "silver coin", "silver coin", "water", "water", "water", "water", "food", "food", "food", "food", "food", "book", "book", "book", "book", "weapon", "weapon", "clothe", "clothe", "medicine", "medicine", "tool", "tool", "girl"]'
    *   Фактический результат: '['gold coin', 'gold coin', 'gold coin', 'silver coin', 'silver coin', 'water', 'water', 'water', 'water', 'food', 'food', 'food', 'food', 'food', 'book', 'book', 'book', 'book', 'weapon', 'weapon', 'clothe', 'clothe', 'medicine', 'medicine', 'tool', 'tool', 'girl']' 

2.  **Пример с наказанием ("wishes"):**
    *   Вход: 'parcel = ["item"]', 'wish1="I want 1 item"', 'wish2="I want 5 wishes"', 'wish3="I want 1 thing"'
    *   Вызов: 'three_wishes(parcel, wish1, wish2, wish3)'
    *   Ожидаемый результат: '[]'
    *   Фактический результат: '[]' 

3.  **Пример с отсутствующим предметом:**
    *   Вход: 'parcel = ["apple", "banana"]', 'wish1="I want 1 apple"', 'wish2="I want 2 oranges"', 'wish3="I want 1 banana"'
    *   Вызов: 'three_wishes(parcel, wish1, wish2, wish3)'
    *   Ожидаемый результат: '["apple", "apple", "banana", "banana", "orange", "orange"]' 
    *   Фактический результат: '['apple', 'apple', 'banana', 'banana', 'orange', 'orange']'

4.  **Пример с множественным числом в желании:**
    *   Вход: 'parcel = ["cat", "cat", "dog"]', 'wish1="I want 2 cats"', 'wish2="I want 1 dog"', 'wish3="I want 1 fish"'
    *   Вызов: 'three_wishes(parcel, wish1, wish2, wish3)'
    *   Ожидаемый результат: '["cat", "cat", "cat", "cat", "dog", "dog", "fish"]'
    *   Фактический результат: '['cat', 'cat', 'cat', 'cat', 'dog', 'dog', 'fish']' 

5.  **Пример с пустым начальным parcel:**
    *   Вход: 'parcel = []', 'wish1="I want 2 apples"', 'wish2="I want 1 pear"', 'wish3="I want 3 apples"'
    *   Вызов: 'three_wishes(parcel, wish1, wish2, wish3)'
    *   Ожидаемый результат: '["apple", "apple", "pear", "apple", "apple", "apple"]'
    *   Фактический результат: '['apple', 'apple', 'pear', 'apple', 'apple', 'apple']' 